{% extends 'base.html' %} {% load static %} {% block title %}SISIMPUR - Sign In
/ Sign Up{% endblock %} {% block head %}
<link
  href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
  rel="stylesheet"
/>
<link href="{% static 'css/signupin.css' %}" rel="stylesheet" />
<link href="{% static 'css/background.css' %}" rel="stylesheet" />
{% endblock %} {% block content %}
<!-- Background Elements -->
<div class="bg-grid"></div>
<div class="blob blob-1"></div>
<div class="blob blob-2"></div>
<div class="particles" id="particles"></div>

<div class="container">
  <div class="form-box login">
    <form action="{% url 'auth:signupin' %}" method="post">
      {% csrf_token %}
      <input type="hidden" name="action" value="login">

      <a class="logo" href="{% url 'home' %}">SISIMPUR</a>
      <h4>Welcome Back!</h4>
      <div class="input-box">
        <input type="email" name="email" placeholder="Gmail Address" required pattern="[a-zA-Z0-9._%+\-]+@(gmail|googlemail)\.com" title="Please enter a valid Gmail address" />
        <i class="bx bxs-envelope"></i>
      </div>
      <div class="input-box">
        <input
          type="password"
          name="password"
          placeholder="Password"
          required
        />
        <i class="bx bxs-lock-alt"></i>
      </div>
      <div class="forget-link">
        <a href="#">Forgot Password?</a>
      </div>
      <button type="button" class="btn">Sign In</button>

      <p>Or Sign In With</p>
      <div class="social-icons">
        <a href="{% url 'auth:google_login' %}"
          ><i class="bx bxl-google"></i
        ></a>
        <a href="{% url 'auth:signupin' %}?social=facebook"
          ><i class="bx bxl-facebook-circle"></i
        ></a>
        <a href="{% url 'auth:signupin' %}?social=github"
          ><i class="bx bxl-github"></i
        ></a>
        <a href="{% url 'auth:signupin' %}?social=linkedin"
          ><i class="bx bxl-linkedin"></i
        ></a>
      </div>
      <div class="return-link">
        <a href="{% url 'home' %}">&#8592; Home </a>
      </div>
    </form>
  </div>

  <div class="form-box register">
    <form action="{% url 'auth:signupin' %}" method="post" data-otp-url="{% url 'auth:send_otp' %}" data-verify-otp-url="{% url 'auth:verify_otp_ajax' %}">
      {% csrf_token %}
      <input type="hidden" name="action" value="signup">
      <a class="logo" style="margin-bottom: 20px" href="{% url 'home' %}">
        SISIMPUR
      </a>
      <h4>Create an Account</h4>
      <div class="input-box">
        <input type="email" name="email" placeholder="Gmail Address (required)" required pattern="[a-zA-Z0-9._%+\-]+@(gmail|googlemail)\.com" title="Please enter a valid Gmail address" id="emailInput" />
        <i class="bx bxs-envelope"></i>
      </div>
      <div style="font-size: 12px; color: #666; margin-top: -10px; margin-bottom: 15px; text-align: center;">
        <i class="bx bx-info-circle"></i> Only Gmail addresses (@gmail.com or @googlemail.com) are accepted
      </div>

      <!-- Send OTP Button -->
      <button type="button" class="btn btn-otp" id="sendOtpBtn" style="margin-bottom: 15px; background: #10b981;">
        <i class="bx bx-mail-send"></i> Send Verification Code
      </button>

      <!-- OTP Verification Section (Hidden by default) -->
      <div class="otp-verification" id="otpSection" style="display: none; margin-bottom: 15px;">
        <div class="input-box">
          <input
            type="text"
            name="otp_code"
            placeholder="Enter 6-digit code"
            maxlength="6"
            pattern="[0-9]{6}"
            id="otpInput"
            autocomplete="off"
          />
          <i class="bx bx-shield-check"></i>
        </div>
        <div class="otp-actions" style="display: flex; gap: 10px; margin-bottom: 10px;">
          <button type="button" class="btn-verify" id="verifyOtpBtn" style="flex: 1; padding: 8px; background: #4f46e5; color: white; border: none; border-radius: 5px; font-size: 14px;">
            <i class="bx bx-check"></i> Verify
          </button>
          <button type="button" class="btn-resend" id="resendOtpBtn" style="flex: 1; padding: 8px; background: transparent; color: #4f46e5; border: 1px solid #4f46e5; border-radius: 5px; font-size: 14px;">
            <i class="bx bx-refresh"></i> Resend
          </button>
        </div>
        <div class="otp-status" id="otpStatus" style="font-size: 12px; text-align: center; margin-bottom: 10px;"></div>
      </div>
      <div class="input-box">
        <input
          type="password"
          name="password"
          placeholder="Password"
          required
        />
        <i class="bx bxs-lock-alt"></i>
      </div>
      <div class="input-box">
        <input
          type="password"
          name="password_confirm"
          placeholder="Confirm Password"
          required
        />
        <i class="bx bxs-lock-alt"></i>
      </div>
      <!-- Hidden field to track OTP verification -->
      <input type="hidden" name="email_verified" id="emailVerified" value="false">

      <button type="submit" class="btn" id="signupBtn" disabled style="opacity: 0.5; cursor: not-allowed;">
        <i class="bx bx-lock"></i> Verify Email First
      </button>



      <p>Or Sign Up With</p>
      <div class="social-icons">
        <a href="{% url 'auth:google_login' %}"
          ><i class="bx bxl-google"></i
        ></a>
        <a href="{% url 'auth:signupin' %}?social=facebook"
          ><i class="bx bxl-facebook-circle"></i
        ></a>
        <a href="{% url 'auth:signupin' %}?social=github"
          ><i class="bx bxl-github"></i
        ></a>
        <a href="{% url 'auth:signupin' %}?social=linkedin"
          ><i class="bx bxl-linkedin"></i
        ></a>
      </div>
      <div class="return-link" style="justify-content: left; align-items: left">
        <a href="{% url 'home' %}">&#8592; Home</a>
      </div>
    </form>
  </div>

  <div class="toggle-box">
    <div class="toggle-panel toggle-left">
      <h1>New Here?</h1>
      <p>Sign up to turn your notes into instant exam questions.</p>
      <button class="btn register-btn">Sign Up</button>
    </div>
    <div class="toggle-panel toggle-right">
      <h2 style="margin-bottom: 0px">Already have An Account?</h2>
      <p>Sign in to access your question library and keep preparing.</p>
      <button class="btn login-btn">Sign In</button>
    </div>
  </div>
</div>

{% endblock %} {% block scripts %}
<script src="{% static 'js/signupin.js' %}"></script>
<script src="{% static 'js/background.js' %}"></script>
{% endblock %}
