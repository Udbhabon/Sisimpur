{% extends 'dashboard_base.html' %}
{% load static %}
{% block title %}Flashcards Complete - {{ flashcard_session.processing_job.document_name }} - SISIMPUR{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/flashcard_complete.css' %}">
{% endblock %}

{% block content %}
<div class="content-wrapper">
    <div class="content-container">
        <div class="complete-container">
            <!-- Completion Header -->
            <div class="complete-header">
                <div class="complete-content">
                    <div class="success-icon floating-element">
                        <i class="ri-check-double-line"></i>
                    </div>
                    <h1 class="complete-title">Study Session Complete!</h1>
                    <p class="complete-subtitle">{{ flashcard_session.processing_job.document_name }}</p>
                    
                    <!-- Progress Circle -->
                    <div class="progress-circle">
                        <svg>
                            <defs>
                                <linearGradient id="progressGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#059669;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <circle class="bg-circle" cx="60" cy="60" r="60" />
                            <circle class="progress-ring" cx="60" cy="60" r="60" style="stroke-dashoffset: calc(377 - (377 * {{ progress_percentage }}) / 100);" />
                        </svg>
                        <div class="progress-text">{{ progress_percentage|floatformat:0 }}%</div>
                    </div>
                </div>
            </div>

            <!-- Study Statistics -->
            <div class="study-stats">
                <div class="stat-item cards">
                    <div class="stat-value">{{ cards_studied }}</div>
                    <div class="stat-label">Cards Studied</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">{{ total_cards }}</div>
                    <div class="stat-label">Total Cards</div>
                </div>
                <div class="stat-item time">
                    <div class="stat-value">{{ total_time_spent|floatformat:0 }}s</div>
                    <div class="stat-label">Time Spent</div>
                </div>
                <div class="stat-item progress">
                    <div class="stat-value">{{ progress_percentage|floatformat:0 }}%</div>
                    <div class="stat-label">Completion</div>
                </div>
            </div>

            <!-- Motivational Message -->
            <div class="motivational-message">
                <i class="ri-star-line"></i>
                Great job! You've completed your study session. Now it's time to test your knowledge with an exam.
            </div>

            <!-- Next Step -->
            <div class="next-step">
                <h2 class="next-step-title">
                    <i class="ri-graduation-cap-line"></i>
                    Ready for the Exam?
                </h2>
                <p class="next-step-text">
                    You've studied all the flashcards! Now put your knowledge to the test with a timed exam. 
                    The exam will help reinforce what you've learned and measure your understanding.
                </p>
                
                <!-- Action Buttons -->
                <form method="post">
                    {% csrf_token %}
                    <div class="action-buttons">
                        <button type="submit" name="action" value="start_exam" class="action-btn btn-exam">
                            <i class="ri-play-circle-line"></i>
                            Start Exam Now
                        </button>
                        
                        <button type="submit" name="action" value="back_to_quizzes" class="action-btn btn-back">
                            <i class="ri-arrow-left-line"></i>
                            Back to Quizzes
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{% static 'js/flashcard_complete.js' %}"></script>
{% endblock %}
